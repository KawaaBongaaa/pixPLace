<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pixPLace App | Image Generator</title>
    <link rel="icon" typ ]e="image/svg+xml" href="/favicon.svg">
    <link rel="stylesheet" href="styles_modern.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=WDXL+Lubrifont+JP+N&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Winky+Rough:ital,wght@0,300..900;1,300..900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Doto:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Shantell+Sans:ital,wght@0,300..800;1,300..800&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Shantell+Sans:wght@453&family=Stalinist+One&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Underdog&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik+Vinyl&family=Underdog&display=swap" rel="stylesheet">
    <script>
        // Пробуем загрузить из разных источников
        const sources = [
            'https://telegram.org/js/telegram-web-app.js',
            'https://unpkg.com/@twa-dev/sdk@7.10.1/dist/index.js',
            'https://cdn.jsdelivr.net/npm/@twa-dev/sdk@7.10.1/dist/index.js'
        ];

        function loadTelegramSDK(index = 0) {
            if (index >= sources.length) {
                console.log('❌ All Telegram SDK sources failed');
                return;
            }

            const script = document.createElement('script');
            script.src = sources[index];
            script.onload = () => console.log('✅ Telegram SDK loaded from:', sources[index]);
            script.onerror = () => loadTelegramSDK(index + 1);
            document.head.appendChild(script);
        }

        loadTelegramSDK();
    </script>
</head>

<body data-theme="dark" data-lang="en">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen active">
        <div class="loading-content">
            <div class="loading-logo">
                <svg class="logo-img" version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg"
                    xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
                    y="0px" viewBox="0 0 1366 768" style="width:150px; height:150px;" xml:space="preserve">
                    <!-- Обрати внимание: fill установлен в currentColor -->
                    <path d="M664,517c-2.9-52.7-49-126.7-111-115c-16.7,4-58.6,12.4-37,36c15.5,23.5,47.8,53.5,51,7c3.4-5.6,6-0.9,9,2
	c8.7,18.6,30.9,29.7,41,47c8.2,5.6,0.7,12.2-5,16c-1.1,14.9,7.1,33.6,1,48c-5.1,14-21.7-9.1-37-4c-19.5,9.5-57,23.3-52,51
	c-3.1,43.2,35.5,65.3,13,76c-65.2,15.2-83.3-68.7-68-117c10.5-23.9,59.8-38.4,57-68c-12.4-26.6-48.1-37.6-75-31
	c-11.3,3.7-21.7,8.8-34,10c-9.1-9.5,16.4-13.9,14-25c-6.6-17.5,9.8-31.8,18-45c38.9-120.1,17-35.2,95-41c-11.5-42.1-69-89.5-109-42
	c-58.9,41.5-33.1,132.5-51,122c-32.2-19.7-29.9,9.6-23,32c9.3,22.1,31.6,37.2,54,41c74.2-11.9,39.6-1.4,11,38
	c-10.5,19.2-14.3,43.4-44,35c-10.7-5-18-19.7-30-21c-9.9,5.1-35.4,42.9-35,13c1.6-9.6-11.4-10.3-14-20c-3.2-11.7-8-45.7,7-49
	c10.4,13,24.3,21.4,42,20c16-6.2-9.6-20.4-9-31c-10.7-19.1-12.6-44.7-15-66c-11.2,9.7-32.2,40.5-24,3c4.5-10,6.2-20.5,12-30
	c1-3.9-7.7-8-9-13c-2.5-6.7-7.3-26.9,2-31c8.2-2.7,39.6,21.6,30,2c-15.4-35.5,2.6-16.9,22-11c8.1,1.5,129.9-115.8,75-93
	c-8.9,1.4-18,5.2-26,10c-41.8,27.3-14.6-23.1,6-34c14.3-10.5,29.9-16,45-21c11.3-5.9,1.2-46.8,22-20c0,0.9,10.1,21.7,9,15
	c7.5-17.3,25.6-28.8,41-38c16.3-15.3,54.2-10.9,45-42c-3.6-22.6,60.2-96.3,42-26c-10.3,16.2,16.3,9.5,2,33
	c-10.4,63.7-136.2,56.8-110,136c17.3,28.2,50.6,47.4,68,76c5.5,12.8,7.8,3.8,16,1c7-5.5,15.3-7.5,23-12c21.5-7-24.6,36.8,6,47
	c8.2,4.4,26.3,30.4,30,27c25.3-334-48.3-35.7-80-126c-39-70.3-51.1-31.5,26-72c17.6-9.9,42.4-11.5,52-33c2.9-37.5,17.6-139.6-29-153
	c-48.8-12.2-92.1,20.5-136,36c-32.9,12.5-71.3,42.9-82,79c-42,39.4-105.7,80.9-119,145c-11.2,25.3-5.3,59.4-17,85
	c-10.3,16.4-16.1,36.1-19,56c3,68.1,11.6,64.9,15,1c4.8-16.7,12.4,10.3,14,15c12.2,17.1,18.2,19.2,2,36c-16.9,26.2-22.5,58-9,88
	c11.9,31.8,50.1,46.8,67,74c12.3,41.7,60.1,80.4,103,84c1.5-2.7,6.1,0.8,2-3c-28-16-43.4-49.7-69-68c-17.4,1.1-21.5-45.9-7-41
	c8.6,4,17.2,6.1,26,9c41.6,6.7,34.1-29.4,51,21c1.8,4.7,9.1,16.1-2,15c-7.6-1.6-24.8-20.1-22-6c7.3,36.2,43.4,70.9,80,78
	c49.2,0.7,97.6-50.6,85-100c-13.4-44,7.6-24.8,27-6C660.6,619.7,664.4,558.4,664,517z M450.2,122.3c17.5-8.7,37.4-1.6,48.4-19.8
	c12-10.9,73-64.3,65.5-23c-22.6,16.3-29.3,41.5-25.1,65.2c-18.9,3.8-43,1.1-62.1,11.3c-28.7,19.6-26.2,1.3-9.9-18.6
	C460.3,138.8,440.9,129.7,450.2,122.3z M296.4,332.7c-13.9-27.1,104-190.3,124.9-143.4c-43.4,27.4-58.1,69.8-69.3,114.2
	C325,299.2,310.2,346.6,296.4,332.7z" fill="currentColor" />
                    <path
                        d="M1113,429c-0.2-24.6-13.1-42.1-22-64c-5.2-44.7-9.1-87.4-35-123c-19.7-37.6-64.3-67.1-95-92c-2.4-3.3-1.3-8.7-4-12
	C929.7,75.2,854.4,59.9,802,35c-25-5.7-59.4-16.1-80,10c-16.4,33-30.7,140.4,13,160c21.5,5.4,42,19.2,63,27c44.8,9.9,10,22.8-2,45
	c-16.1,71.3-40.5,2.3-72-18c-31.5-26.8-11.9,115.2-14,141c4.4,11.6-5.1,27.5,11,6c8.9-13.5,38.8-23.4,29-42
	c-5.9-16.9-21.3-33.5,9-17c31.1,28.6,39.7-21.8,65-39c14-10.2,31.4-24.5,33-42c6.2-29-22.9-54.6-47-67c-22.8-12.2-53.1-19.9-63-48
	c-0.3-10.5-15.5-25.4-2-32c6.9-0.5,2.9-8.7,1-12c0.2-2.5-0.4-7.1-2-9c-9.8-57.3,56.1,22.9,43,44c-4.2,14.8,16.6,17.5,25,22
	c21.5,11.1,53.5,25.4,62,51c5.3-8.6,8.3-18.7,17-26c5.9-0.7,6.5,5.4,8,9c-0.6,35.6,68.1,29.7,78,73c10.5,25.7-27-3.3-35-5
	c-74.1-24.7,26.3,50.3,35,68c8.1,18.5,32.8,29.2,47,12c16.4-5.1,4,17,2,24c-4,6.1-0.2,4.8,5,4c46.4-25.1,33,13.5,21,41
	c3.2,8.6,20.2,39.5,6,42c-36.3-40.7-13.5-1.5-29,29c-1.6,9.2-6.7,16.6-10,25c-3.8,6.5-18.4,18.8-5,22c17.2,1.3,30.8-6.7,42-20
	c14.5,4.9,9,38,6,50c-4.9,10.3-17.2,10.8-13,24c-6.2,19.8-27.8-15.3-35-18c-18.4,6.5-52.6,46-66,2c0-16.3-72.1-72.5-28-58
	c71.6,32.5,126.6-101,61-69c-17,0.7-0.5-40.4-10-54c-9-38.6-36.7-75.2-75-89c-23.3-10.6-84.8,51.1-71,63c29.7,11,49.1-25.9,65-23
	c14.9,9.7,13.4,31,19,45c5.1,16.9,17.4,31.2,26,47c-1.8,35,3.5,17.9,15,40c-5.3,7.1-56.4-21.4-79-5c-13.4,7.3-34.4,16.6-32,36
	c32.9,45.2,82.4,57.9,58,126c-9.4,37.7-34.9,68.7-76,45c11.3-42.1,47.3-88-15-113c-42.2-29-64,43.5-52-51
	c-27.8-18.6,26.4-40.8,33-60c3-6.6,11.2-15.1,12-2c3.3,9.6,5.8,29.3,21,19c28.6-21.7,57.9-50.3,7-63c-60.6-23.5-117.4,43.7-123,98
	c-4.9,25.6-3.1,58.4,5,81c7.3,27.3,38,65.1,61,27c12.3-9.3,15.3,4.2,10,13c-22.3,67,60,145.9,121,93c18.3-3.3,63.4-83.3,30-59
	c-26.5,15.4-11-11.2-6-24c1.1-7,2.9-16.2,12-12c42.3,24.8,71.3-36.7,67,21c-1.9,8.9-10.2,15.4-19,18c-18,19.9-51.5,53.9-64,68
	c38.1,1.4,79.5-34.1,99-69c4.7-17.6,15.8-33.6,34-42c40.1-31.9,59.3-80,35-124c-21.8-36.5-18.5-17.5,0-54c10.6-34.5,15.4,17.1,13,29
	c-1.9,1.4,0.7,4.6,0,7c1.2,2.2,3.2,4.7,4,7C1114.2,483.4,1115.3,440.5,1113,429z M917.7,130.7c-5.2,3.1-11.8,6.4-18.7,8.3
	c7.4,3.7,20.9,27.8,4.9,25.7c-28.7-25.8-58.6-9.7-78-22.4c14-23.8-8.2-46.6-25.3-66.1c2.2-33.2,69.6,25.1,75.7,40.7
	C884.4,114,930.2,115.5,917.7,130.7z M1062.8,335.2c-79.1-51.1-39.5-95.7-112.3-144.2C945.8,134.7,1104.8,326.4,1062.8,335.2z"
                        fill="currentColor" />
                </svg>
            </div>
            <h2 data-i18n="loading">Please, Have a Fun!</h2>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <div class="header-left">
                        <button class="logo" onclick="showGeneration()"
                            style="all: unset; display: flex; align-items: center; gap: var(--space-3); cursor: pointer;">
                            <svg class="logo-img" version="1.1" id="Слой_1" xmlns="http://www.w3.org/2000/svg"
                                xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink"
                                x="0px" y="0px" viewBox="0 0 1366 768" style="enable-background:new 0 0 1366 768;"
                                xml:space="preserve">
                                <!-- Обрати внимание: fill установлен в currentColor -->
                                <path d="M664,517c-2.9-52.7-49-126.7-111-115c-16.7,4-58.6,12.4-37,36c15.5,23.5,47.8,53.5,51,7c3.4-5.6,6-0.9,9,2
	c8.7,18.6,30.9,29.7,41,47c8.2,5.6,0.7,12.2-5,16c-1.1,14.9,7.1,33.6,1,48c-5.1,14-21.7-9.1-37-4c-19.5,9.5-57,23.3-52,51
	c-3.1,43.2,35.5,65.3,13,76c-65.2,15.2-83.3-68.7-68-117c10.5-23.9,59.8-38.4,57-68c-12.4-26.6-48.1-37.6-75-31
	c-11.3,3.7-21.7,8.8-34,10c-9.1-9.5,16.4-13.9,14-25c-6.6-17.5,9.8-31.8,18-45c38.9-120.1,17-35.2,95-41c-11.5-42.1-69-89.5-109-42
	c-58.9,41.5-33.1,132.5-51,122c-32.2-19.7-29.9,9.6-23,32c9.3,22.1,31.6,37.2,54,41c74.2-11.9,39.6-1.4,11,38
	c-10.5,19.2-14.3,43.4-44,35c-10.7-5-18-19.7-30-21c-9.9,5.1-35.4,42.9-35,13c1.6-9.6-11.4-10.3-14-20c-3.2-11.7-8-45.7,7-49
	c10.4,13,24.3,21.4,42,20c16-6.2-9.6-20.4-9-31c-10.7-19.1-12.6-44.7-15-66c-11.2,9.7-32.2,40.5-24,3c4.5-10,6.2-20.5,12-30
	c1-3.9-7.7-8-9-13c-2.5-6.7-7.3-26.9,2-31c8.2-2.7,39.6,21.6,30,2c-15.4-35.5,2.6-16.9,22-11c8.1,1.5,129.9-115.8,75-93
	c-8.9,1.4-18,5.2-26,10c-41.8,27.3-14.6-23.1,6-34c14.3-10.5,29.9-16,45-21c11.3-5.9,1.2-46.8,22-20c0,0.9,10.1,21.7,9,15
	c7.5-17.3,25.6-28.8,41-38c16.3-15.3,54.2-10.9,45-42c-3.6-22.6,60.2-96.3,42-26c-10.3,16.2,16.3,9.5,2,33
	c-10.4,63.7-136.2,56.8-110,136c17.3,28.2,50.6,47.4,68,76c5.5,12.8,7.8,3.8,16,1c7-5.5,15.3-7.5,23-12c21.5-7-24.6,36.8,6,47
	c8.2,4.4,26.3,30.4,30,27c25.3-334-48.3-35.7-80-126c-39-70.3-51.1-31.5,26-72c17.6-9.9,42.4-11.5,52-33c2.9-37.5,17.6-139.6-29-153
	c-48.8-12.2-92.1,20.5-136,36c-32.9,12.5-71.3,42.9-82,79c-42,39.4-105.7,80.9-119,145c-11.2,25.3-5.3,59.4-17,85
	c-10.3,16.4-16.1,36.1-19,56c3,68.1,11.6,64.9,15,1c4.8-16.7,12.4,10.3,14,15c12.2,17.1,18.2,19.2,2,36c-16.9,26.2-22.5,58-9,88
	c11.9,31.8,50.1,46.8,67,74c12.3,41.7,60.1,80.4,103,84c1.5-2.7,6.1,0.8,2-3c-28-16-43.4-49.7-69-68c-17.4,1.1-21.5-45.9-7-41
	c8.6,4,17.2,6.1,26,9c41.6,6.7,34.1-29.4,51,21c1.8,4.7,9.1,16.1-2,15c-7.6-1.6-24.8-20.1-22-6c7.3,36.2,43.4,70.9,80,78
	c49.2,0.7,97.6-50.6,85-100c-13.4-44,7.6-24.8,27-6C660.6,619.7,664.4,558.4,664,517z M450.2,122.3c17.5-8.7,37.4-1.6,48.4-19.8
	c12-10.9,73-64.3,65.5-23c-22.6,16.3-29.3,41.5-25.1,65.2c-18.9,3.8-43,1.1-62.1,11.3c-28.7,19.6-26.2,1.3-9.9-18.6
	C460.3,138.8,440.9,129.7,450.2,122.3z M296.4,332.7c-13.9-27.1,104-190.3,124.9-143.4c-43.4,27.4-58.1,69.8-69.3,114.2
	C325,299.2,310.2,346.6,296.4,332.7z" fill="currentColor" />
                                <path
                                    d="M1113,429c-0.2-24.6-13.1-42.1-22-64c-5.2-44.7-9.1-87.4-35-123c-19.7-37.6-64.3-67.1-95-92c-2.4-3.3-1.3-8.7-4-12
	C929.7,75.2,854.4,59.9,802,35c-25-5.7-59.4-16.1-80,10c-16.4,33-30.7,140.4,13,160c21.5,5.4,42,19.2,63,27c44.8,9.9,10,22.8-2,45
	c-16.1,71.3-40.5,2.3-72-18c-31.5-26.8-11.9,115.2-14,141c4.4,11.6-5.1,27.5,11,6c8.9-13.5,38.8-23.4,29-42
	c-5.9-16.9-21.3-33.5,9-17c31.1,28.6,39.7-21.8,65-39c14-10.2,31.4-24.5,33-42c6.2-29-22.9-54.6-47-67c-22.8-12.2-53.1-19.9-63-48
	c-0.3-10.5-15.5-25.4-2-32c6.9-0.5,2.9-8.7,1-12c0.2-2.5-0.4-7.1-2-9c-9.8-57.3,56.1,22.9,43,44c-4.2,14.8,16.6,17.5,25,22
	c21.5,11.1,53.5,25.4,62,51c5.3-8.6,8.3-18.7,17-26c5.9-0.7,6.5,5.4,8,9c-0.6,35.6,68.1,29.7,78,73c10.5,25.7-27-3.3-35-5
	c-74.1-24.7,26.3,50.3,35,68c8.1,18.5,32.8,29.2,47,12c16.4-5.1,4,17,2,24c-4,6.1-0.2,4.8,5,4c46.4-25.1,33,13.5,21,41
	c3.2,8.6,20.2,39.5,6,42c-36.3-40.7-13.5-1.5-29,29c-1.6,9.2-6.7,16.6-10,25c-3.8,6.5-18.4,18.8-5,22c17.2,1.3,30.8-6.7,42-20
	c14.5,4.9,9,38,6,50c-4.9,10.3-17.2,10.8-13,24c-6.2,19.8-27.8-15.3-35-18c-18.4,6.5-52.6,46-66,2c0-16.3-72.1-72.5-28-58
	c71.6,32.5,126.6-101,61-69c-17,0.7-0.5-40.4-10-54c-9-38.6-36.7-75.2-75-89c-23.3-10.6-84.8,51.1-71,63c29.7,11,49.1-25.9,65-23
	c14.9,9.7,13.4,31,19,45c5.1,16.9,17.4,31.2,26,47c-1.8,35,3.5,17.9,15,40c-5.3,7.1-56.4-21.4-79-5c-13.4,7.3-34.4,16.6-32,36
	c32.9,45.2,82.4,57.9,58,126c-9.4,37.7-34.9,68.7-76,45c11.3-42.1,47.3-88-15-113c-42.2-29-64,43.5-52-51
	c-27.8-18.6,26.4-40.8,33-60c3-6.6,11.2-15.1,12-2c3.3,9.6,5.8,29.3,21,19c28.6-21.7,57.9-50.3,7-63c-60.6-23.5-117.4,43.7-123,98
	c-4.9,25.6-3.1,58.4,5,81c7.3,27.3,38,65.1,61,27c12.3-9.3,15.3,4.2,10,13c-22.3,67,60,145.9,121,93c18.3-3.3,63.4-83.3,30-59
	c-26.5,15.4-11-11.2-6-24c1.1-7,2.9-16.2,12-12c42.3,24.8,71.3-36.7,67,21c-1.9,8.9-10.2,15.4-19,18c-18,19.9-51.5,53.9-64,68
	c38.1,1.4,79.5-34.1,99-69c4.7-17.6,15.8-33.6,34-42c40.1-31.9,59.3-80,35-124c-21.8-36.5-18.5-17.5,0-54c10.6-34.5,15.4,17.1,13,29
	c-1.9,1.4,0.7,4.6,0,7c1.2,2.2,3.2,4.7,4,7C1114.2,483.4,1115.3,440.5,1113,429z M917.7,130.7c-5.2,3.1-11.8,6.4-18.7,8.3
	c7.4,3.7,20.9,27.8,4.9,25.7c-28.7-25.8-58.6-9.7-78-22.4c14-23.8-8.2-46.6-25.3-66.1c2.2-33.2,69.6,25.1,75.7,40.7
	C884.4,114,930.2,115.5,917.7,130.7z M1062.8,335.2c-79.1-51.1-39.5-95.7-112.3-144.2C945.8,134.7,1104.8,326.4,1062.8,335.2z"
                                    fill="currentColor" />
                            </svg>
                            <span class="logo-text" data-i18n="app_title">pixPLace</span>
                        </button>
                    </div>
                </div>
                <div class="header-right">
                    <!-- Рядом с кнопками языка/темы -->
                    <!-- 
    <button id="musicToggle" class="music-toggle" onclick="toggleMusicDropdown()">
        <span class="music-icon">🎵</span>
    </button>
    
    <div id="musicDropdown" class="music-dropdown" style="display: none;">
        <div class="music-header">
            <span><svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e3e3e3"><path d="M400-120q-66 0-113-47t-47-113q0-66 47-113t113-47q23 0 42.5 5.5T480-418v-422h240v160H560v400q0 66-47 113t-113 47Z"/></svg> Background Music</span>
        </div>
        
        <div class="playlist-list">
            <div class="playlist-item" onclick="playPlaylist('relax')">
                <span class="playlist-icon">🎧</span>
                <span class="playlist-name">Relax</span>
            </div>
            
            <div class="playlist-item" onclick="playPlaylist('ambient')">
                <span class="playlist-icon">🌙</span>
                <span class="playlist-name">Ambient</span>
            </div>
            
            <div class="playlist-item" onclick="playPlaylist('jazz')">
                <span class="playlist-icon">🎷</span>
                <span class="playlist-name">Jazz</span>
            </div>
        </div>
        
        <div class="music-player-controls" id="musicControls" style="display: none;">
            <button id="playPauseBtn" onclick="togglePlayPause()">⏸</button>
            <input type="range" id="volumeSlider" min="0" max="100" value="50" onchange="setVolume(this.value)">
        </div>
    </div>
</div> 

<!-- Скрытый SoundCloud iframe -->
                    <iframe id="musicPlayer" style="display: none;" width="100%" height="166" scrolling="no"
                        frameborder="no" allow="autoplay"></iframe>

                    <button class="control-btn" onclick="toggleLanguage()" title="Language">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10" />
                            <path d="M2 12h20" />
                            <path
                                d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
                        </svg>
                    </button>
                    <button class="control-btn" onclick="toggleTheme()" title="Theme">
                        <svg class="theme-icon sun" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="12" cy="12" r="5" />
                            <path
                                d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                        </svg>
                        <svg class="theme-icon moon" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
                        </svg>
                    </button>
                    <button class="control-btn" onclick="showHistory()" title="History">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <!-- Иконка "список" из Lucide (аналог истории или лога) -->
                            <line x1="8" y1="6" x2="21" y2="6"></line>
                            <line x1="8" y1="12" x2="21" y2="12"></line>
                            <line x1="8" y1="18" x2="21" y2="18"></line>
                            <circle cx="4" cy="6" r="1"></circle>
                            <circle cx="4" cy="12" r="1"></circle>
                            <circle cx="4" cy="18" r="1"></circle>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Status Bar -->
        <div id="statusBar" class="status-bar">
            <div class="status-content">
                <div class="status-icon">↻</div>
                <span class="status-text" data-i18n="connecting">Connecting...</span>
            </div>
        </div>
        <!-- Добавьте этот код после status bar в index.html -->
        <div id="subscriptionScreen" class="screen">
            <div class="screen-content">
                <div class="subscription-container">
                    <div class="subscription-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" height="64px" viewBox="0 -960 960 960" width="64px"
                            fill="currentColor">
                            <path
                                d="M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 31.5-156t86-127Q252-817 325-848.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 82-31.5 155T763-197.5q-54 54.5-127 86T480-80Zm0-60q142 0 241-99.5T820-480q0-142-99-241t-241-99q-141 0-240.5 99T140-480q0 141 99.5 240.5T480-140Zm0-340Zm0 220q92 0 156-64t64-156q0-92-64-156t-156-64q-92 0-156 64t-64 156q0 92 64 156t156 64Z" />
                        </svg>
                    </div>
                    <h2 data-i18n="limit_reached_title">Trial Limit Reached</h2>
                    <p data-i18n="limit_reached_desc">You've reached your free trial limit. Upgrade now to continue
                        creating amazing images!</p>
                    <button class="subscription-btn primary" id="upgradeBtn">
                        <span class="btn-icon">⭐</span>
                        <span data-i18n="upgrade_btn">Upgrade Now</span>
                    </button>
                    <button class="action-btn secondary" onclick="showGeneration()">
                        <span data-i18n="back_to_app">Back to App</span>
                    </button>
                </div>
            </div>
        </div>
        <!-- Main Content -->
        <main class="main-content">
            <!-- Generation Screen -->
            <div id="generationScreen" class="screen active">
                <div class="screen-content">
                    <div class="welcome-section">
                        <h1 data-i18n="welcome_title">Create Amazing Images</h1>
                        <p data-i18n="welcome_subtitle">Describe your vision and watch AI bring it to life</p>
                    </div>

                    <form class="generation-form" onsubmit="generateImage(event)">
                        <!-- Prompt Input -->
                        <div class="form-group">
                            <label class="form-label" data-i18n="prompt_label">Describe your image</label>
                            <div class="input-wrapper">
                                <textarea id="promptInput" class="form-textarea"
                                    data-i18n-placeholder="prompt_placeholder"
                                    placeholder="A beautiful sunset over the ocean..." rows="3"
                                    maxlength="500"></textarea>
                                <div class="input-counter">
                                    <span id="charCounter">0</span>/500
                                </div>
                            </div>
                        </div>

                        <!-- Style Selection -->
                        <div class="form-group">
                            <label class="form-label" data-i18n="style_label">Art Style</label>
                            <div class="style-grid">
                                <button type="button" class="style-card active" data-style="realistic"
                                    onclick="selectStyle(this)">
                                    <span data-i18n="style_realistic">Realistic</span>
                                </button>
                                <button type="button" class="style-card" data-style="artistic"
                                    onclick="selectStyle(this)">
                                    <span data-i18n="style_artistic">Artistic</span>
                                </button>
                                <button type="button" class="style-card" data-style="cartoon"
                                    onclick="selectStyle(this)">
                                    <span data-i18n="style_cartoon">Cartoon</span>
                                </button>
                                <button type="button" class="style-card" data-style="fantasy"
                                    onclick="selectStyle(this)">
                                    <span data-i18n="style_fantasy">Fantasy</span>
                                </button>
                                <button type="button" class="style-card" data-style="anime" onclick="selectStyle(this)">
                                    <span data-i18n="style_anime">Anime</span>
                                </button>
                                <button type="button" class="style-card" data-style="cyberpunk"
                                    onclick="selectStyle(this)">
                                    <span data-i18n="style_cyberpunk">Cyberpunk</span>
                                </button>
                            </div>
                        </div>

                        <!-- Quality & Size -->
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" data-i18n="quality_label">Quality</label>
                                <select id="qualitySelect" class="form-select">
                                    <option value="standard" data-i18n="quality_standard">Standard</option>
                                    <option value="hd" selected data-i18n="quality_hd">HD</option>
                                    <option value="ultra" data-i18n="quality_ultra">Ultra HD</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" data-i18n="size_label">Size</label>
                                <select id="sizeSelect" class="form-select">
                                    <option value="square" data-i18n="size_square">Square</option>
                                    <option value="portrait" data-i18n="size_portrait">Portrait</option>
                                    <option value="landscape" data-i18n="size_landscape">Landscape</option>
                                </select>
                            </div>
                        </div>

                        <!-- Generate Button -->
                        <button type="submit" class="generate-btn" id="generateBtn">
                            <span class="btn-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                    viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                                    <path
                                        d="m176-120-56-56 301-302-181-45 198-123-17-234 179 151 216-88-87 217 151 178-234-16-124 198-45-181-301 301Zm24-520-80-80 80-80 80 80-80 80Zm355 197 48-79 93 7-60-71 35-86-86 35-71-59 7 92-79 49 90 22 23 90Zm165 323-80-80 80-80 80 80-80 80ZM569-570Z" />
                                </svg></span>
                            <span class="btn-text" data-i18n="generate_btn">Generate Image</span>
                            <div class="btn-ripple"></div>
                        </button>
                    </form>
                </div>
            </div>

            <!-- Processing Screen -->
            <div id="processingScreen" class="screen">
                <div class="screen-content">
                    <div class="processing-animation">
                        <div class="processing-circle">
                            <svg class="processing-svg" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="2" fill="none"
                                    opacity="0.3" />
                                <circle cx="50" cy="50" r="45" stroke="currentColor" stroke-width="2" fill="none"
                                    stroke-dasharray="283" stroke-dashoffset="283" class="progress-circle" />
                            </svg>
                            <div class="processing-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                    viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                                    <path
                                        d="M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 32.5-156t88-127Q256-817 330-848.5T488-880q80 0 151 27.5t124.5 76q53.5 48.5 85 115T880-518q0 115-70 176.5T640-280h-74q-9 0-12.5 5t-3.5 11q0 12 15 34.5t15 51.5q0 50-27.5 74T480-80Zm0-400Zm-220 40q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120-160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm200 0q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120 160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17ZM480-160q9 0 14.5-5t5.5-13q0-14-15-33t-15-57q0-42 29-67t71-25h70q66 0 113-38.5T800-518q0-121-92.5-201.5T488-800q-136 0-232 93t-96 227q0 133 93.5 226.5T480-160Z" />
                                </svg></div>
                        </div>
                    </div>

                    <div class="processing-content">
                        <h2 data-i18n="processing_title">Creating Your Masterpiece</h2>
                        <p class="processing-subtitle" data-i18n="processing_subtitle">This may take up to 60 seconds
                        </p>

                        <div class="processing-steps">
                            <div class="step active" data-step="1">
                                <div class="step-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                        viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                                        <path
                                            d="M42-120v-112q0-33 17-62t47-44q51-26 115-44t141-18q77 0 141 18t115 44q30 15 47 44t17 62v112H42Zm80-80h480v-32q0-11-5.5-20T582-266q-36-18-92.5-36T362-320q-71 0-127.5 18T142-266q-9 5-14.5 14t-5.5 20v32Zm240-240q-66 0-113-47t-47-113h-10q-9 0-14.5-5.5T172-620q0-9 5.5-14.5T192-640h10q0-45 22-81t58-57v38q0 9 5.5 14.5T302-720q9 0 14.5-5.5T322-740v-54q9-3 19-4.5t21-1.5q11 0 21 1.5t19 4.5v54q0 9 5.5 14.5T422-720q9 0 14.5-5.5T442-740v-38q36 21 58 57t22 81h10q9 0 14.5 5.5T552-620q0 9-5.5 14.5T532-600h-10q0 66-47 113t-113 47Zm0-80q33 0 56.5-23.5T442-600H282q0 33 23.5 56.5T362-520Zm300 160-6-30q-6-2-11.5-4.5T634-402l-28 10-20-36 22-20v-24l-22-20 20-36 28 10q4-4 10-7t12-5l6-30h40l6 30q6 2 12 5t10 7l28-10 20 36-22 20v24l22 20-20 36-28-10q-5 5-10.5 7.5T708-390l-6 30h-40Zm20-70q12 0 21-9t9-21q0-12-9-21t-21-9q-12 0-21 9t-9 21q0 12 9 21t21 9Zm72-130-8-42q-9-3-16.5-7.5T716-620l-42 14-28-48 34-30q-2-5-2-8v-16q0-3 2-8l-34-30 28-48 42 14q6-6 13.5-10.5T746-798l8-42h56l8 42q9 3 16.5 7.5T848-780l42-14 28 48-34 30q2 5 2 8v16q0 3-2 8l34 30-28 48-42-14q-6 6-13.5 10.5T818-602l-8 42h-56Zm28-90q21 0 35.5-14.5T832-700q0-21-14.5-35.5T782-750q-21 0-35.5 14.5T732-700q0 21 14.5 35.5T782-650ZM362-200Z" />
                                    </svg></div>
                                <span data-i18n="step_analyzing">Analyzing prompt</span>
                            </div>
                            <div class="step" data-step="2">
                                <div class="step-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                        viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                                        <path
                                            d="M480-80q-82 0-155-31.5t-127.5-86Q143-252 111.5-325T80-480q0-83 32.5-156t88-127Q256-817 330-848.5T488-880q80 0 151 27.5t124.5 76q53.5 48.5 85 115T880-518q0 115-70 176.5T640-280h-74q-9 0-12.5 5t-3.5 11q0 12 15 34.5t15 51.5q0 50-27.5 74T480-80Zm0-400Zm-220 40q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120-160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm200 0q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm120 160q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17ZM480-160q9 0 14.5-5t5.5-13q0-14-15-33t-15-57q0-42 29-67t71-25h70q66 0 113-38.5T800-518q0-121-92.5-201.5T488-800q-136 0-232 93t-96 227q0 133 93.5 226.5T480-160Z" />
                                    </svg></div>
                                <span data-i18n="step_generating">Generating image</span>
                            </div>
                            <div class="step" data-step="3">
                                <div class="step-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                        viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                                        <path
                                            d="M500-413v-147h100l-40-40h-60v-160q0-17 11.5-28.5T540-800h97q11 0 20.5 5.5T672-779l78 139h-58l-40-80h-92v40h68l40 80h104l59 103q-26-11-54-17t-57-6q-67 0-124.5 29T500-413Zm-80 253h-97q-11 0-20.5-5.5T288-181l-78-139h58l40 80h92v-40h-68l-40-80H188l-57-100q-2-5-3.5-10t-1.5-10q0-4 5-20l57-100h104l40-80h68v-40h-92l-40 80h-58l78-139q5-10 14.5-15.5T323-800h97q17 0 28.5 11.5T460-760v160h-60l-40 40h100v120h-88l-40-80h-92l-40 40h108l40 80h112v56q-10 24-15 50t-5 54q0 17 1.5 34t6.5 34q-5 5-12.5 8.5T420-160Zm300 40 120-120-28-28-72 72v-164h-40v164l-72-72-28 28 120 120Zm0 80q-83 0-141.5-58.5T520-240q0-83 58.5-141.5T720-440q83 0 141.5 58.5T920-240q0 83-58.5 141.5T720-40Z" />
                                    </svg></div>
                                <span data-i18n="step_finalizing">Finalizing result</span>
                            </div>
                        </div>

                        <div class="processing-timer">
                            <span data-i18n="elapsed_time">Elapsed time:</span>
                            <span id="elapsedTime">0s</span>
                        </div>
                    </div>

                    <button class="cancel-btn" onclick="cancelGeneration()">
                        <span data-i18n="cancel_btn">Cancel</span>
                    </button>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="resultScreen" class="screen">
                <div class="screen-content">
                    <div class="result-container">
                        <div class="result-image-container">
                            <img id="resultImage" class="result-image" alt="Generated Image" />
                            <div class="image-overlay">
                                <button class="overlay-btn download-btn" onclick="downloadImage()">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                        <polyline points="7,10 12,15 17,10" />
                                        <line x1="12" y1="15" x2="12" y2="3" />
                                    </svg>
                                </button>
                                <button class="overlay-btn share-btn" onclick="shareImage()">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="18" cy="5" r="3" />
                                        <circle cx="6" cy="12" r="3" />
                                        <circle cx="18" cy="19" r="3" />
                                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" />
                                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="result-info">
                            <div class="result-meta">
                                <div class="meta-item">
                                    <span class="meta-label" data-i18n="prompt_label">Prompt:</span>
                                    <span class="meta-value" id="resultPrompt"></span>
                                </div>
                                <div class="meta-item">
                                    <span class="meta-label" data-i18n="style_label">Style:</span>
                                    <span class="meta-value" id="resultStyle"></span>
                                </div>
                                <div class="meta-item">
                                    <span class="meta-label" data-i18n="quality_label">Quality:</span>
                                    <span class="meta-value" id="resultQuality"></span>
                                </div>
                                <div class="meta-item">
                                    <span class="meta-label" data-i18n="generation_time">Generation time:</span>
                                    <span class="meta-value" id="resultTime"></span>
                                </div>
                            </div>
                        </div>

                        <div class="result-actions">
                            <button class="action-btn primary" onclick="newGeneration()">
                                <span class="btn-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                        viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                                        <path
                                            d="m176-120-56-56 301-302-181-45 198-123-17-234 179 151 216-88-87 217 151 178-234-16-124 198-45-181-301 301Zm24-520-80-80 80-80 80 80-80 80Zm355 197 48-79 93 7-60-71 35-86-86 35-71-59 7 92-79 49 90 22 23 90Zm165 323-80-80 80-80 80 80-80 80ZM569-570Z" />
                                    </svg></span>
                                <span data-i18n="create_new">Create New</span>
                            </button>
                            <button class="action-btn secondary" onclick="showHistory()">
                                <span class="btn-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                        viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                                        <path
                                            d="m787-145 28-28-75-75v-112h-40v128l87 87Zm-587 25q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v268q-19-9-39-15.5t-41-9.5v-243H200v560h242q3 22 9.5 42t15.5 38H200Zm0-120v40-560 243-3 280Zm80-40h163q3-21 9.5-41t14.5-39H280v80Zm0-160h244q32-30 71.5-50t84.5-27v-3H280v80Zm0-160h400v-80H280v80ZM720-40q-83 0-141.5-58.5T520-240q0-83 58.5-141.5T720-440q83 0 141.5 58.5T920-240q0 83-58.5 141.5T720-40Z" />
                                    </svg></span>
                                <span data-i18n="view_history">View History</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Screen -->
            <div id="historyScreen" class="screen">
                <div class="screen-content">
                    <div class="screen-header">
                        <button class="back-btn" onclick="showGeneration()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M19 12H5" />
                                <path d="M12 19l-7-7 7-7" />
                            </svg>
                        </button>
                        <h2 data-i18n="history_title">Generation History</h2>
                        <button class="clear-btn" onclick="clearHistory()">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="3,6 5,6 21,6" />
                                <path
                                    d="M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6" />
                            </svg>
                        </button>
                    </div>

                    <div class="history-content" id="historyContent">
                        <div class="empty-history">
                            <div class="empty-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                                    viewBox="0 -960 960 960" width="24px" fill="#e3e3e3">
                                    <path
                                        d="M320-160q-33 0-56.5-23.5T240-240v-120h120v-90q-35-2-66.5-15.5T236-506v-44h-46L60-680q36-46 89-65t107-19q27 0 52.5 4t51.5 15v-55h480v520q0 50-35 85t-85 35H320Zm120-200h240v80q0 17 11.5 28.5T720-240q17 0 28.5-11.5T760-280v-440H440v24l240 240v56h-56L510-514l-8 8q-14 14-29.5 25T440-464v104ZM224-630h92v86q12 8 25 11t27 3q23 0 41.5-7t36.5-25l8-8-56-56q-29-29-65-43.5T256-684q-20 0-38 3t-36 9l42 42Zm376 350H320v40h286q-3-9-4.5-19t-1.5-21Zm-280 40v-40 40Z" />
                                </svg></div>
                            <h3 data-i18n="empty_history_title">No generations yet</h3>
                            <p data-i18n="empty_history_subtitle">Create your first AI image to see it here</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="app_modern.js"></script>
    <!-- Модальное окно лимита -->
    <div id="limitModal" class="limit-modal">
        <div class="limit-modal-backdrop"></div>
        <div class="limit-modal-content">
            <div class="limit-icon">⚡</div>
            <h2 class="limit-title">Generation Limit Reached</h2>
            <p class="limit-message">You've reached your free generation limit. Upgrade now to continue creating amazing
                images!</p>
            <div class="limit-buttons">
                <button class="btn btn-primary" id="upgradeBtn">
                    🔥 Upgrade Now
                </button>
                <button id="closeLimitModal" class="btn btn-secondary">
                    Maybe Later
                </button>
            </div>
        </div>
    </div>
</body>

</html>